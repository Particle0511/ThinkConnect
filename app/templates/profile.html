{% extends "base.html" %}

{% block title %}{{ user.username }}'s Profile{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="row mb-4 align-items-center">
        <div class="col-md-2 text-center">
            <img src="{{ url_for('static', filename='images/default-profile.png') }}" class="img-fluid rounded-circle" alt="Profile Picture" style="width: 120px; height: 120px; object-fit: cover;">
        </div>
        <div class="col-md-10">
            <h1 class="fw-bold">{{ user.username }}</h1>
            <p class="text-muted mb-1">
                Role: <span class="badge bg-secondary">{{ user.role }}</span>
            </p>
            <p class="text-muted">
                Joined on: {{ user.created_at.strftime('%B %d, %Y') }}
            </p>
            {% if user == current_user %}
                <a href="#" class="btn btn-sm btn-outline-secondary">Edit Profile</a>
            {% endif %}
        </div>
    </div>

    <hr>

    <h2 class="mt-5 mb-4">Projects Posted by {{ user.username }}</h2>
    {% if user.issues %}
        <div class="list-group recent-issues-list">
             {% for issue in user.issues %}
                <a href="{{ url_for('main.issue_details', issue_id=issue.id) }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                    <div>
                        <h5 class="mb-1 fw-bold">{{ issue.title }}</h5>
                        <p class="mb-1 text-muted">
                            Category: <span class="badge bg-category">{{ issue.category }}</span> | Mode: {{ issue.mode }}
                        </p>
                    </div>
                    <span class="text-muted">{{ issue.date_posted.strftime('%d %b %Y') }}</span>
                </a>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-muted">{{ user.username }} has not posted any projects yet.</p>
    {% endif %}
</div>
{% endblock %}